<!DOCTYPE html>
<html>
<head>
  <title>Fuxico</title>
  <%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track' => true %>
  <%= javascript_include_tag 'application', 'data-turbolinks-track' => true %>
  <%= javascript_include_tag 'http://localhost:4000/faye.js' %>
  <%= csrf_meta_tags %>
</head>
<body>

<% if user_signed_in? %>
<div class="ui inverted top fixed menu">
  <div class="right menu">
    <div class="ui dropdown item">
      <i class="user icon"></i> 
      <%= current_user.name %>
      <i class="dropdown icon"></i>
      <div class="menu">
        <%= link_to edit_user_registration_path, class: 'item' do %>
        <i class="write icon"></i>
        Editar perfil
        <% end %>

        <%= link_to destroy_user_session_path, method: :delete, class: 'item' do %>
        <i class="sign out icon"></i>
        Sair
        <% end %>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript">
  $('.ui.dropdown').dropdown();
  //$('.ui.sidebar').sidebar('toggle');
</script>


<div class="ui vertical inverted left visible sidebar menu overlay labeled icon">
  <%= link_to root_path, class: 'item' do %>
  <i class="home icon"></i>
  Inicio
  <% end %>

  <%= link_to groups_path, class: 'item' do %>
  <i class="users icon"></i>
  Grupos
  <% end %>

  <%= link_to themes_path, class: 'item' do %>
  <i class="comments outline icon"></i>
  Salas de bate-papo
  <% end %>
</div>
<% end %>

<% if user_signed_in? %>
  <div class="pusher" style="padding-left: 180px;">
    <% if notice %>
    <div class="ui container">
      <p></p>
      <div class="ui message">
        <i class="close icon"></i>
        <div class="header">
          Notificação!
        </div>
        <p><%= notice %></p>
      </div>
    </div>
    <% end %>

    <% if alert %>
    <div class="ui warning container">
      <p></p>
      <div class="ui message">
        <i class="close icon"></i>
        <div class="header">
          Alerta!
        </div>
        <p><%= alert %></p>
      </div>
    </div>
    <% end %>

    <% if flash[:success] %>
    <div class="ui positive container">
      <p></p>
      <div class="ui message">
        <i class="close icon"></i>
        <div class="header">
          Sucesso!
        </div>
        <p><%= flash[:success] %></p>
      </div>
    </div>
    <% end %>

    <%= yield %>
  </div>
<% else %>
  <% if notice %>
  <div class="ui container">
    <p></p>
    <div class="ui message">
      <i class="close icon"></i>
      <div class="header">
        Notificação!
      </div>
      <p><%= notice %></p>
    </div>
  </div>
  <% end %>

  <% if alert %>
  <div class="ui warning container">
    <p></p>
    <div class="ui message">
      <i class="close icon"></i>
      <div class="header">
        Alerta!
      </div>
      <p><%= alert %></p>
    </div>
  </div>
  <% end %>

  <% if flash[:success] %>
  <div class="ui container">
    <p></p>
    <div class="ui positive message">
      <i class="close icon"></i>
      <div class="header">
        Sucesso!
      </div>
      <p><%= flash[:success] %></p>
    </div>
  </div>
  <% end %>
  
  <div class="hide-curso">
    <%= yield %>
  </div>
<% end %>

<script type="text/javascript">
  $('.message .close')
  .on('click', function() {
    $(this)
      .closest('.message')
      .transition('fade');
  });
</script>

</body>
</html>
